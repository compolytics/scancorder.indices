% Generated by roxygen2: do not edit by hand
\name{DecodeReflectanceList}
\alias{DecodeReflectanceList}
\title{DecodeReflectanceList: Decodes Reflectance data from CSV files}
\format{
\code{\link[R6]{R6Class}} object.
}
\description{
An R6 class designed to load reflectance data from CSV files where each row
represents a separate sample. The CSV should have wavelengths as column headers
(after metadata columns) and reflectance values in the data rows.

If the sensor metadata is found in the package, wavelengths and FWHM values are
loaded from the sensor configuration. If the sensor is not found, the class will
use wavelengths from the CSV column headers and assume a FWHM of 1nm for each wavelength.
}
\section{Fields}{

\describe{
\item{\code{sensor_name}}{Character. The sensor name/serial to look up wavelength and FWHM information.}

\item{\code{delimiter}}{Character. The delimiter used in the CSV file (default: ";").}
}}

\section{Methods}{

\subsection{Public methods}{
\itemize{
\item \href{#method-DecodeReflectanceList-new}{\code{DecodeReflectanceList$new()}}
\item \href{#method-DecodeReflectanceList-score}{\code{DecodeReflectanceList$score()}}
\item \href{#method-DecodeReflectanceList-parse_wavelengths}{\code{DecodeReflectanceList$parse_wavelengths()}}
\item \href{#method-DecodeReflectanceList-load_sensor_metadata}{\code{DecodeReflectanceList$load_sensor_metadata()}}
\item \href{#method-DecodeReflectanceList-sanitize_field_name}{\code{DecodeReflectanceList$sanitize_field_name()}}
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-DecodeReflectanceList-new"></a>}}

\subsection{Method \code{new()}}{
Create a new instance of the reflectance list decoder.

This method initializes the decoder with the sensor name to retrieve
wavelength and FWHM information from the package's sensor metadata.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{DecodeReflectanceList$new(sensor_name, delimiter = ";")}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{sensor_name}}{Character. The sensor name/serial (e.g., "8330" or "S8330").}

\item{\code{delimiter}}{Character. The delimiter used in the CSV file (default: ";").}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new instance of DecodeReflectanceList.
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-DecodeReflectanceList-score"></a>}}

\subsection{Method \code{score()}}{
The main method: read CSV file and generate reflectance output
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{DecodeReflectanceList$score(csv_file_path)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{csv_file_path}}{Character. Path to the CSV file containing reflectance data}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A list containing metadata table, reflectance data, wavelengths, and FWHM values
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-DecodeReflectanceList-parse_wavelengths"></a>}}

\subsection{Method \code{parse_wavelengths()}}{
Parse wavelength column names from CSV header
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{DecodeReflectanceList$parse_wavelengths(column_names, metadata_columns)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{column_names}}{Character vector of column names from CSV}

\item{\code{metadata_columns}}{Character vector of column names that are metadata (not wavelengths)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Numeric vector of wavelengths extracted from column names
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-DecodeReflectanceList-load_sensor_metadata"></a>}}

\subsection{Method \code{load_sensor_metadata()}}{
Load sensor metadata to get wavelengths and FWHM. If sensor metadata is not found,
uses wavelengths from CSV column headers and assumes FWHM = 1nm for all wavelengths.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{DecodeReflectanceList$load_sensor_metadata(csv_wavelengths = NULL)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{csv_wavelengths}}{Numeric vector of wavelengths from CSV (optional, used as fallback)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A list containing wavelength and fwhm vectors
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-DecodeReflectanceList-sanitize_field_name"></a>}}

\subsection{Method \code{sanitize_field_name()}}{
Sanitize field names by replacing problematic characters
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{DecodeReflectanceList$sanitize_field_name(field_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{field_name}}{A character string representing a field name to sanitize}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A sanitized field name safe for use in R
}
}
}
\examples{
\dontrun{
# Create decoder for sensor S8330 (uses sensor metadata)
decoder <- DecodeReflectanceList$new(sensor_name = "8330")

# Load reflectance data from CSV file
data <- decoder$score("path/to/reflectance_data.csv")

# Access the results
print(data$meta_table)  # Metadata including LabelName
print(data$wavelength)  # Wavelengths from sensor metadata
print(data$fwhm)        # FWHM from sensor metadata
print(length(data$reflectance))  # Number of samples
print(data$reflectance[[1]])     # First sample's reflectance values

# If sensor is not found, wavelengths from CSV columns are used
# and FWHM is assumed to be 1nm
decoder2 <- DecodeReflectanceList$new(sensor_name = "unknown")
data2 <- decoder2$score("path/to/reflectance_data.csv")  # Will show warning
print(data2$wavelength)  # Wavelengths from CSV column headers
print(data2$fwhm)        # All values will be 1
}
}
